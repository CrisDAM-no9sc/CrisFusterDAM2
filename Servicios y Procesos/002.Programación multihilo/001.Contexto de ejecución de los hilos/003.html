<!doctype html>
<html>
	<head>
	</head>
	<body>	
		<input>
        <script>
            //-------------------- ENTRADA DE USUARIO ------------------//
            //utilizamos u campo input para que el usuario ingrese el texto
            var entrada = document.querySelector("input");
            //cuando detectamos un cambio se ejecutara con el evento de entrada 
            //cuando escribamos algo y luego hagamos click fuera o presionemos enter
            entrada.onchange = function(){
                //nos enseñara el mensaje por consola , y nos enseñara el contenido ingresado en el input
                console.log("Te has identificado como ", this.value);
                
                //usamos fetch para enviar una solicitud al archivo php, pasamos el valor de entrada como parametro usuario
                //este metodo realiza una peticion http asincronica, asi nos permite continuar haciendo otras tareas 
                fetch("003.php?usuario=" + encodeURIComponent(this.value))
                //gestionamos la respuesta del servidor 
                .then(function(response) {
                    //extraemos el contendmo de la respuesta del servidor como texto
                    return response.text();
                })
                //esta promesa se ejecutara despues de la respuesta del servidor que ha sido convertida en texto
                .then(function(data) {
                    //luego lo muestra por consola 
                    console.log("Respuesta del servidor: ", data);
                });
            }

        </script>
	</body>
</html>